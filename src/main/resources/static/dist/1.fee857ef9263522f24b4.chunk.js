webpackJsonp([1],{122:function(t,e,o){t.exports=o.p+"57d56f2736860720537f7ba31169d377.png"},123:function(t,e,o){t.exports=o.p+"94de6103fc7366225e7ba333d764ab2b.png"},124:function(t,e,o){t.exports=o.p+"05e0e1e2252513238e297452336d1684.png"},125:function(t,e,o){t.exports=o.p+"9a354d6cac78394c3eac87c83977fc16.svg"},126:function(t,e,o){t.exports=o.p+"84973c144426de10147b41d7712ea269.png"},132:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",{staticClass:"layout"},[n("Header",{staticStyle:{padding:"20px"}},["scan"==t.type?n("Steps",{attrs:{current:0}},[n("Step",{attrs:{title:"进行中",content:"扫描文件"}}),t._v(" "),n("Step",{attrs:{title:"待进行",content:"下载文件至设备或打印"}})],1):n("Steps",{attrs:{current:0}},[n("Step",{attrs:{title:"进行中",content:"扫描文件"}}),t._v(" "),n("Step",{attrs:{title:"待进行",content:"调整打印设置"}}),t._v(" "),n("Step",{attrs:{title:"待进行",content:"选择打印方式"}}),t._v(" "),n("Step",{attrs:{title:"待进行",content:"设备打印"}})],1)],1),t._v(" "),n("Content",{staticStyle:{height:"100%",padding:"2%"},style:this.$root.background},[n("v-exception",{ref:"exceptionModel"}),t._v(" "),n("v-preProcessModel",{ref:"preProcessModel"}),t._v(" "),n("Modal",{attrs:{width:"800px",closable:!1,"mask-closable":!1},model:{value:t.scanFinalModel,callback:function(e){t.scanFinalModel=e},expression:"scanFinalModel"}},[n("p",{staticStyle:{color:"#19be6b","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("成功")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-bottom":"10px"}},[t._v(t._s(t.finishRemark))]),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"14px","margin-bottom":"10px"}},[t._v("请勿忘记您的U盘、背包或其他个人物品，感谢为您服务，下次再见！")]),t._v(" "),n("img",{staticStyle:{margin:"30px"},attrs:{src:o(83),width:"200"}})]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("p",{staticStyle:{"text-align":"center","font-size":"14px","margin-bottom":"10px"}},[t._v("我们将在 "+t._s(this.$root.countdownReturnTime)+" s后返回开始页面")])])]),t._v(" "),n("Modal",{attrs:{width:"800px",closable:!1,"mask-closable":!1},model:{value:t.usbCopyMode,callback:function(e){t.usbCopyMode=e},expression:"usbCopyMode"}},[n("p",{staticStyle:{color:"#19be6b","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("USB设备传输")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:o(74),height:"150px"}}),t._v(" "),n("div",[t._v("请插入您的U盘，设备将自动拷贝文件至您的USB设备")]),t._v(" "),n("h3",[t._v(t._s(t.usbCopyState))])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"warning"},on:{click:function(e){t.cancelListenUSBInsertion()}}},[n("Icon",{attrs:{type:"md-exit"}}),t._v("\n                        回退\n                    ")],1),t._v(" "),n("v-countdownButton",{ref:"countdown"})],1)]),t._v(" "),n("Modal",{attrs:{width:"800px",closable:!1,"mask-closable":!1},model:{value:t.qrCodeMode,callback:function(e){t.qrCodeMode=e},expression:"qrCodeMode"}},[n("p",{staticStyle:{color:"#19be6b","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("扫描“码上”下")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("img",{ref:"QRCodeImg",attrs:{height:"150px"}}),t._v(" "),t.loading_QR?n("Spin",{attrs:{fix:""}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),t._v(" "),n("div",[t._v("上传扫描文件中")]),t._v(" "),n("div",[t._v("服务器在二维码生成后10分钟后将删除文件，请尽快取回。")])],1):t._e(),t._v(" "),n("h3",[t._v("请扫描二维码下载您的扫描文件图片,服务器在二维码生成后10分钟后将删除文件，请尽快取回!")])],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"success"},on:{click:function(e){t.finalSuccess()}}},[n("Icon",{attrs:{type:"md-exit"}}),t._v("\n                        完成\n                    ")],1)],1)]),t._v(" "),n("Modal",{attrs:{width:"800px",closable:!1,"mask-closable":!1},model:{value:t.scanFinishModel,callback:function(e){t.scanFinishModel=e},expression:"scanFinishModel"}},[n("p",{staticStyle:{color:"#19be6b","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("扫描结束")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-bottom":"10px"}},[t._v("请选择扫描文件下载方式")]),t._v(" "),n("Row",{staticStyle:{"margin-top":"3%"}},[n("Col",{attrs:{span:"8"}},[n("Card",{staticStyle:{"margin-bottom":"5px"},nativeOn:{click:function(e){t.doUploadCopyFile()}}},[n("div",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:o(123),height:"90"}}),t._v(" "),n("h3",[t._v("“码”上下载")]),t._v(" "),n("h4",[t._v("QR Code Download")])])])],1),t._v(" "),n("Col",{attrs:{span:"8"}},[n("Card",{staticStyle:{"margin-bottom":"5px"},nativeOn:{click:function(e){t.startUSBListening()}}},[n("div",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:o(124),height:"90"}}),t._v(" "),n("h3",[t._v("U盘拷贝")]),t._v(" "),n("h4",[t._v("USB Device Copy")])])])],1),t._v(" "),n("Col",{attrs:{span:"8"}},[n("Card",{staticStyle:{"margin-bottom":"5px"},nativeOn:{click:function(e){t.finishScan("copy")}}},[n("div",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:o(122),height:"90"}}),t._v(" "),n("h3",[t._v("复印")]),t._v(" "),n("h4",[t._v("Copy")])])])],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("v-countdownButton",{ref:"countdown"})],1)]),t._v(" "),n("Modal",{attrs:{width:"800px",closable:!1,"mask-closable":!1},model:{value:t.scanSuccessModel,callback:function(e){t.scanSuccessModel=e},expression:"scanSuccessModel"}},[n("p",{staticStyle:{color:"#19be6b","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("成功")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-bottom":"10px"}},[t._v("扫描任务已经顺利完成")]),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"14px","margin-bottom":"10px"}},[t._v("\n                        若您需要继续扫描，请装入文件并点击继续扫描，否则请点击我已完成扫描。")]),t._v(" "),n("img",{staticStyle:{margin:"30px"},attrs:{src:o(83),width:"200"}})]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"success",size:"large"},on:{click:function(e){t.doScan()}}},[n("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                        继续扫描\n                    ")],1),t._v(" "),n("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"success",size:"large"},on:{click:function(e){t.finishScan()}}},[n("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                        我已完成扫描\n                    ")],1),t._v(" "),n("v-countdownButton",{ref:"countdown"})],1)]),t._v(" "),n("Modal",{attrs:{width:"800px",closable:!1,"mask-closable":!1},nativeOn:{click:function(e){t.countdownReset()}},model:{value:t.scanStartModel,callback:function(e){t.scanStartModel=e},expression:"scanStartModel"}},[n("p",{staticStyle:{color:"#2d8cf0","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("装入扫描文件并开始扫描")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-bottom":"10px"}},[t._v("请准备并装入需要扫描或复印的文件")]),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"14px","margin-bottom":"10px"}},[t._v("\n                        请将需扫描的文稿按图示放入ADF自动进稿器（左图）或平板扫描器（右图），并确认位置正确。"),n("br"),t._v("\n                        书本等已经装订的材料禁止使用ADF，请根据文档辅助线将原稿正面向下放在平板扫描器的左上角。")]),t._v(" "),n("img",{staticStyle:{margin:"10px"},attrs:{src:o(126),width:"600"}})]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"success",size:"large"},on:{click:function(e){t.doScan()}}},[n("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                        初始化设备并开始扫描\n                    ")],1),t._v(" "),n("v-countdownButton",{ref:"countdown"})],1)]),t._v(" "),n("Row",[n("p",{staticStyle:{"text-align":"center","font-size":"18px",color:"#000000"}},[t._v("MOTA校园 · 免费自助打印设备")]),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"40px","margin-top":"5px",color:"#000000"}},[t._v("设备扫描中，请稍后……")])]),t._v(" "),n("Row",{staticStyle:{height:"80%"},attrs:{type:"flex",justify:"center"}},[n("Col",{staticStyle:{"align-items":"center",display:"flex","flex-direction":"column","justify-content":"center"},attrs:{span:"18"}},[n("img",{staticStyle:{margin:"30px"},attrs:{src:o(125),width:"100"}}),t._v(" "),n("p",{staticStyle:{"font-size":"16px"}},[t._v("海内存知己，天涯若比邻")]),t._v(" "),n("p",{staticStyle:{"font-size":"32px"}},[t._v("我们将很快完成")]),t._v(" "),n("br"),t._v(" "),n("Progress",{attrs:{percent:t.pseudoProgress,status:"active"}}),t._v(" "),n("p",{staticStyle:{"font-size":"12px"}},[t._v("(进度条指示为预估的扫描时间，可能与实际时间不符，以实际完成进度为准)")]),t._v(" "),n("p",{staticStyle:{"font-size":"18px","margin-top":"10px"}},[t._v(t._s(t.state))])],1)],1)],1),t._v(" "),n("Footer",[n("p",{staticClass:"layout-footer-center"},[t._v("2018-2019 © Oriole Software MOTA 长沙点墨文化传媒有限公司")])])],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},54:function(t,e,o){o(98);var n=o(14)(o(91),o(132),"data-v-5d52f75a",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\views\\Scan.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] Scan.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},58:function(t,e,o){o(62);var n=o(14)(o(59),o(66),"data-v-684d4a5f",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\components\\CountdownButton.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] CountdownButton.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},59:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{showButton:!0,router:"/"}},components:{},methods:{countDownStart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"true";clearInterval(this.$root.countdownClock),this.router=o,this.showButton=n,this.$root.countdownReturnTime=t,this.$root.countdownClock=window.setInterval(function(){--e.$root.countdownReturnTime<0&&e.countdownDo()},1e3)},countdownDo:function(){clearInterval(this.$root.countdownClock),this.$router.push(this.router)},countdownReset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;this.$root.countdownReturnTime=t}}}},60:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(58),s=o.n(n);e.default={components:{"v-countdownButton":s.a},data:function(){return{title:[{title:"执行结果",key:"state",width:90},{title:"代码",key:"code",width:90},{title:"异常信息",key:"msg"}],errorMsg:[],exceptionModel:!1,randomCode:null}},props:{},methods:{openExceptionModel:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-1",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ERROR";arguments[4]?this.$refs.countdown.countDownStart(60,"/StopServer"):this.$refs.countdown.countDownStart(60),this.randomCode=t;var s={};s.code=o,s.state=n,s.msg=e,this.errorMsg.push(s),this.exceptionModel=!0}}}},61:function(t,e){},62:function(t,e){},63:function(t,e,o){t.exports=o.p+"6f5a360e8c66765b60806e3babf78aef.png"},64:function(t,e,o){o(61);var n=o(14)(o(60),o(65),"data-v-0d3998ae",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\components\\ExceptionModel.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ExceptionModel.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},65:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{width:"700",closable:!1,"mask-closable":!1},model:{value:t.exceptionModel,callback:function(e){t.exceptionModel=e},expression:"exceptionModel"}},[n("p",{staticStyle:{color:"#ed4014","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("系统发生错误或异常")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("img",{staticStyle:{margin:"10px"},attrs:{src:o(63),width:"200"}}),t._v(" "),n("p",{staticStyle:{"font-size":"16px"}},[t._v("由于设备发生致命错误，我们被迫终止本次打印服务，给您带来的不便我们深表歉意。")]),t._v(" "),n("p",{staticStyle:{color:"#999999"}},[t._v("若您已经付费，请保留下方随机用户码进行退费，您将在1个工作日内获得全额退款与一次免费打印机会（限20张内）")]),t._v(" "),n("p",{staticStyle:{margin:"5px"}},[t._v("随机用户编码："),n("span",{staticStyle:{"font-size":"22px"}},[t._v(t._s(t.randomCode)+"-ET")])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Table",{attrs:{columns:t.title,data:t.errorMsg}}),t._v(" "),n("v-countdownButton",{ref:"countdown",staticStyle:{"font-size":"16px","margin-top":"10px"}})],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},66:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.showButton?o("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"error"},on:{click:function(e){t.countdownDo()}}},[o("Icon",{attrs:{type:"md-exit"}}),t._v("\n    退出\n    "),o("span",{staticStyle:{color:"#FA8072"}},[t._v("["+t._s(this.$root.countdownReturnTime)+" 秒]")])],1):t._e()},staticRenderFns:[]},t.exports.render._withStripped=!0},67:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(15);o.n(n);e.default={data:function(){return{promptMessage:"海内存知己，天涯若比邻",promptMessageArray:["欢迎使用墨拓自助打印设备","来自中南大学计算机学院、商学院的8名同学","以梦为马，践行公益传媒","凡心所向，素履所往；生如逆旅，一苇以航"],fileProcessingModel:!1,processClock:0}},methods:{doAnimation:function(){var t=this,e=0;this.processClock=window.setInterval(function(){e++,t.promptMessage=t.promptMessageArray[e%t.promptMessageArray.length]},2e3)},fileProcessing:function(t,e,o){var s=this;this.doAnimation(),this.fileProcessingModel=!0,n({method:"get",url:"http://localhost:8999/preProcessing",params:{fileAbsolutePath:encodeURI(JSON.stringify(e)),fileType:o,randomCode:this.$root.randomCode}}).then(function(e){var o=e.data;"SUCCESS"==o.state?(console.log("Successful File Preprocessing"),clearInterval(s.processClock),s.$router.push({name:"SetPrintParam"})):(s.fileProcessingModel=!1,t.$refs.exceptionModel.openExceptionModel(s.$root.randomCode,o.msg,o.code,o.state))}).catch(function(e){s.fileProcessingModel=!1,t.$refs.exceptionModel.openExceptionModel(s.$root.randomCode,e.toString())})},copyFileProcessing:function(t,e){var o=this;this.doAnimation(),this.fileProcessingModel=!0,n({method:"get",url:"http://localhost:8999/copyPreProcessing",params:{totalPage:e,randomCode:this.$root.randomCode}}).then(function(e){var n=e.data;"SUCCESS"==n.state?(console.log("Successful File Preprocessing"),clearInterval(o.processClock),o.$router.push({name:"SetPrintParam"})):(o.fileProcessingModel=!1,t.$refs.exceptionModel.openExceptionModel(o.$root.randomCode,n.msg,n.code,n.state))}).catch(function(e){o.fileProcessingModel=!1,t.$refs.exceptionModel.openExceptionModel(o.$root.randomCode,e.toString())})}}}},68:function(t,e){},69:function(t,e,o){t.exports=o.p+"f082de95f3d1fd59c515b27d4aeafb2c.svg"},70:function(t,e,o){o(68);var n=o(14)(o(67),o(71),"data-v-0f0180d9",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\components\\PreProcessModel.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] PreProcessModel.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},71:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{width:"700",closable:!1,"mask-closable":!1},model:{value:t.fileProcessingModel,callback:function(e){t.fileProcessingModel=e},expression:"fileProcessingModel"}},[n("p",{staticStyle:{color:"#2b85e4","text-align":"center","font-size":"16px"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("正在处理中，请稍后")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("iframe",{attrs:{frameborder:"0",scrolling:"no",src:"Loading",width:"100%",height:"150"}}),t._v(" "),n("p",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.promptMessage))]),t._v(" "),n("p",{staticStyle:{"font-size":"32px"}},[t._v("我们将很快完成")]),t._v(" "),n("p",{staticStyle:{"font-size":"16px"}},[t._v("为了确保文档格式与打印一致，小墨正在调用WPS Office2019处理相关文件")])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("img",{attrs:{src:o(69),width:"70px"}}),t._v(" "),n("p",[t._v("金山办公软件提供技术支持")])])])},staticRenderFns:[]},t.exports.render._withStripped=!0},74:function(t,e,o){t.exports=o.p+"6f55deaff33a8c2bdf3796ae5137efd5.gif"},83:function(t,e,o){t.exports=o.p+"c43e905c803f9aadcd2a3d8cf94d2d71.png"},91:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(15),s=(o.n(n),o(64)),i=o.n(s),r=o(58),a=o.n(r),c=o(70),l=o.n(c);e.default={components:{"v-exception":i.a,"v-countdownButton":a.a,"v-preProcessModel":l.a},data:function(){return{processCountdownClock:0,state:"正在初始化设备",scanStartModel:!1,scanSuccessModel:!1,type:this.$route.params.type,estimatedTime:18,pseudoProgress:0,serialNumber:1,scanFinishModel:!1,scanFinalModel:!1,qrCodeUrl:null,qrCodeMode:!1,loading_QR:!1,usbCopyMode:!1,finishRemark:"扫描任务已经全部完成",usbCopyState:"等待USB插入中……",usbListeningSource:{}}},mounted:function(){this.scanStartModel=!0,this.$refs.countdown.countDownStart(300)},methods:{countdownReset:function(){this.$refs.countdown.countdownReset(300)},showScanSuccessPage:function(){this.scanSuccessModel=!0,this.$refs.countdown.countDownStart(300)},finishScan:function(){"scan"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type)?(this.$refs.countdown.countDownStart(300),this.scanSuccessModel=!1,this.scanFinishModel=!0):(this.closeAllModel(),this.$refs.preProcessModel.copyFileProcessing(this,this.serialNumber-1))},doScan:function(){var t=this;clearInterval(this.$root.countdownClock),this.scanStartModel=!1,this.scanSuccessModel=!1,this.state="正在扫描";var e=0;this.processCountdownClock=window.setInterval(function(){e+=.1,t.pseudoProgress=Math.floor(-100/Math.pow(t.estimatedTime,2)*Math.pow(e,2)+200/t.estimatedTime*e),t.pseudoProgress<100&t.pseudoProgress>95&&clearInterval(t.processCountdownClock)},100),n({method:"get",url:"http://localhost:8999/runningScanner",params:{randomCode:this.$root.randomCode,serialNumber:this.serialNumber}}).then(function(e){var o=e.data;clearInterval(t.processCountdownClock),"SUCCESS"==o.state?(t.state="扫描已经结束",t.serialNumber+=1,t.pseudoProgress=100,t.showScanSuccessPage()):(t.state="扫描已经终止",t.pseudoProgress=0,t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,o.msg,o.code,o.state))}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},doUploadCopyFile:function(){var t=this;this.countdownReset(),this.scanFinishModel=!1,this.qrCodeMode=!0,this.loading_QR=!0,n({method:"get",url:"http://localhost:8999/uploadCopyFileToServer",params:{totalPage:this.serialNumber-1,randomCode:this.$root.randomCode}}).then(function(e){var o=e.data;"SUCCESS"==o.state?t.getQRCodePic(o.msg):(t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,o.msg,o.code,o.state))}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},startUSBListening:function(){var t=this;this.countdownReset(),this.scanFinishModel=!1,this.usbCopyMode=!0,this.usbListeningSource=this.axios.CancelToken.source(),n({method:"get",url:"http://localhost:8999/listenUSBInsertion",cancelToken:this.usbListeningSource.token}).then(function(e){var o=e.data;"SUCCESS"==o.state&&(console.log("UBS Device Connection Successful"),t.usbCopyState="USB设备已识别，文件拷贝中……",n({method:"get",url:"http://localhost:8999/copyFileToUSB",params:{totalPage:t.serialNumber-1,randomCode:t.$root.randomCode,fileCopyPath:JSON.parse(o.msg)[0]+"MotaScanFile/"}}).then(function(e){var o=e.data;"SUCCESS"==o.state?(t.finishRemark="文件已拷贝至USB设备/MotaScanFile文件夹中",t.finalSuccess()):(t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,o.msg,o.code,o.state))}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())}))}).catch(function(e){"Stop"!=e.message&&(t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString()))})},cancelListenUSBInsertion:function(){this.usbCopyMode=!1,this.scanFinishModel=!0,this.usbListeningSource.cancel("Stop")},getQRCodePic:function(t){var e=this;console.log(t),n({method:"get",url:t,responseType:"arraybuffer"}).then(function(t){return e.loading_QR=!1,"data:image/png;base64,"+btoa(new Uint8Array(t.data).reduce(function(t,e){return t+String.fromCharCode(e)},""))}).then(function(t){e.$refs.QRCodeImg.src=t}).catch(function(t){e.closeAllModel(),e.$refs.exceptionModel.openExceptionModel(e.$root.randomCode,t.toString())})},finalSuccess:function(){this.scanFinalModel=!0,this.qrCodeMode=!1,this.usbCopyMode=!1,this.countdownReturnTime=20,this.$refs.countdown.countDownStart(10,"/",!1)},closeAllModel:function(){this.scanStartModel=!1,this.scanSuccessModel=!1,this.scanFinishModel=!1,this.scanFinalModel=!1,this.qrCodeMode=!1,this.usbCopyMode=!1}}}},98:function(t,e){}});