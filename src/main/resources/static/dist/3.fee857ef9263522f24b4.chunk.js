webpackJsonp([3],{107:function(t,e,o){t.exports=o.p+"63e59808eedade7ec2aeeea6af00dcd8.png"},112:function(t,e,o){t.exports=o.p+"76b395705eadd87508947ba175ffeb90.png"},116:function(t,e,o){t.exports=o.p+"580f39983bb6d373d26aaf7012bfafc9.png"},130:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",{staticClass:"layout",nativeOn:{click:function(e){t.countdownReset()}}},[n("Header",{staticStyle:{padding:"20px"}},[n("Steps",{attrs:{current:3}},[n("Step",{attrs:{title:"已完成",content:"上传文件或插入U盘"}}),t._v(" "),n("Step",{attrs:{title:"已完成",content:"选择需要打印的文件"}}),t._v(" "),n("Step",{attrs:{title:"已完成",content:"调整打印设置"}}),t._v(" "),n("Step",{attrs:{title:"进行中",content:"选择打印方式"}}),t._v(" "),n("Step",{attrs:{title:"待进行",content:"设备打印"}})],1)],1),t._v(" "),n("Content",{staticStyle:{height:"100%",padding:"2%"},style:this.$root.background},[n("v-exception",{ref:"exceptionModel"}),t._v(" "),n("Modal",{attrs:{width:"800px"},model:{value:t.freePrintModel,callback:function(e){t.freePrintModel=e},expression:"freePrintModel"}},[n("p",{staticStyle:{color:"#2b85e4","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("模式选择确认")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-bottom":"10px"}},[t._v("页边距广告免费打印模式 · AD Free Mode")]),t._v(" "),n("Row",{staticStyle:{height:"80%"},attrs:{type:"flex",justify:"center"}},[n("Col",{staticStyle:{"align-items":"center",display:"flex","flex-direction":"column","justify-content":"center"},attrs:{span:"8"}},[n("img",{attrs:{src:o(78),height:"150",padding:"10px"}})]),t._v(" "),n("Col",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","font-size":"14px"},attrs:{span:"16"}},[n("p",{staticStyle:{"text-align":"left",color:"#f60"}},[t._v("助力环保 公益打印")]),t._v(" "),n("p",{staticStyle:{"text-align":"left"}},[t._v("\n                                您选择的模式为\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("免费打印")]),t._v("\n                                ，此模式下墨拓将采用\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("墨水环保模式[中等质量]")]),t._v("\n                                为您进行资料打印。注意，墨拓将仅在\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("不覆盖页面内容的页边距位置")]),t._v("\n                                处进行广告\\宣传物料投放。墨拓承诺，每笔打印业务所产生效益，将向公益组织捐献\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("15%")]),t._v("\n                                用于留守儿童关爱、乡村知识扶贫、重症儿童救助等方面。同时，墨拓将以不低于\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("30%")]),t._v("\n                                的比例投放免费纯公益性广告、宣传视频等内容。\n                            ")]),t._v(" "),n("p",{staticStyle:{"text-align":"left","font-size":"10px","margin-top":"10px"}},[t._v("\n                                墨拓对通过自助设备投放广告的商家已尽到包括资质审查、广告真实性核验在内的必要保真义务，但对于任何包含于、经由或从任何与墨拓有关服务所获得的信息、内容或广告，不声明或保证其正确性或可靠性。您于此接受并承认信赖任何信息、内容或广告所发生的风险都应自行承担，对于因此所生的任何直接、间接、附带的或因此而导致的衍生性损失概不负责。\n                            ")])])],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"success",size:"large",loading:t.printLoading},on:{click:t.freePrintConfirm}},[t._v("确认\n                    ")]),t._v(" "),n("Button",{attrs:{type:"warning",size:"large"},on:{click:t.closeAllModel}},[t._v("取消")])],1)]),t._v(" "),n("Modal",{attrs:{width:"800px"},model:{value:t.payPrintModel,callback:function(e){t.payPrintModel=e},expression:"payPrintModel"}},[n("p",{staticStyle:{color:"#2b85e4","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("模式选择确认")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-bottom":"10px"}},[t._v("高质量付费打印模式 · High Quality\n                        Mode")]),t._v(" "),n("Row",{staticStyle:{height:"80%"},attrs:{type:"flex",justify:"center"}},[n("Col",{staticStyle:{"align-items":"center",display:"flex","flex-direction":"column","justify-content":"center"},attrs:{span:"8"}},[n("img",{ref:"QRCodeImg",attrs:{height:"150px"}}),t._v(" "),n("img",{attrs:{src:o(116),width:"150",padding:"10px"}}),t._v(" "),n("p",{staticStyle:{color:"#2b85e4"}},[t._v("请使用微信扫描左上方维码进行支付")])]),t._v(" "),n("Col",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","font-size":"14px"},attrs:{span:"16"}},[n("p",{staticStyle:{"text-align":"left",color:"#f60"}},[t._v("超低价格 助力好成绩")]),t._v(" "),n("p",{staticStyle:{"text-align":"left"}},[t._v("\n                                您选择的模式为\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("高质量付费打印")]),t._v("\n                                ，此模式下墨拓将采用\n                                "),n("span",{staticStyle:{color:"#2b85e4"}},[t._v("高质量模式[高等质量]")]),t._v("\n                                为您进行资料打印。\n                            ")]),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"40px","margin-top":"25px"}},[n("span",{staticStyle:{color:"#2b85e4","font-size":"15px"}},[t._v("您应支付")]),t._v("\n                                "+t._s(t.count)+" x 0.10￥ = "+t._s((.1*t.count).toFixed(2))+"￥\n                                "),n("span",{staticStyle:{color:"#2b85e4","font-size":"15px"}},[t._v("打印费用")])])]),t._v(" "),t.loading_QR?n("Spin",{attrs:{fix:""}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),t._v(" "),n("div",[t._v("正在计算打印费用中")]),t._v(" "),n("div",[t._v("网络可能存在延迟，请稍等")])],1):t._e()],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"success",size:"large",icon:"md-card"},on:{click:function(e){t.cardPrint()}}},[t._v("\n                        兑换码/月卡支付\n                    ")]),t._v(" "),n("Button",{attrs:{type:"success",size:"large",loading:t.printLoading},on:{click:t.payPrintConfirm}},[t._v("我已完成支付\n                    ")]),t._v(" "),n("Button",{attrs:{type:"warning",size:"large"},on:{click:t.closeAllModel}},[t._v("取消")])],1)]),t._v(" "),n("Modal",{attrs:{width:"720px"},model:{value:t.redeemCodePayModel,callback:function(e){t.redeemCodePayModel=e},expression:"redeemCodePayModel"}},[n("p",{staticStyle:{color:"#2b85e4","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("打印卡 免费高质量打印")])],1),t._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"column"}},[n("img",{attrs:{src:o(112),width:"80"}}),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"18px","margin-top":"10px"}},[t._v("请输入您卡片的兑换CDKEY")]),t._v(" "),n("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("本卡为计页付费类型卡，剩余张数不足时不可打印，请在输入兑换码后点击核对按钮进行查询核对。")]),t._v(" "),n("Input",{staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入十位兑换码"},model:{value:t.redeemCode,callback:function(e){t.redeemCode=e},expression:"redeemCode"}},[n("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.checkCardVaild},slot:"append"},[t._v("核对")])],1),t._v(" "),n("p",{staticStyle:{margin:"10px",color:"#2b85e4"}},[t._v(t._s(t.cardInfo))]),t._v(" "),n("v-keyboard",{on:{updatekey:t.getRedeemCode}})],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"success",size:"large",loading:t.printLoading},on:{click:t.cardPrintConfirm}},[t._v("确认\n                    ")]),t._v(" "),n("Button",{attrs:{type:"warning",size:"large"},on:{click:t.closeAllModel}},[t._v("取消")])],1)]),t._v(" "),n("Row",[n("p",{staticStyle:{"text-align":"center","font-size":"18px"}},[t._v("MOTA校园 · 免费自助打印设备")]),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"40px"}},[t._v("请选择所需打印服务类型")])]),t._v(" "),n("Row",{staticStyle:{height:"80%"},attrs:{type:"flex",justify:"center"}},[n("Col",{staticStyle:{"align-items":"center",display:"flex","flex-direction":"column","justify-content":"center"},attrs:{span:"10"},nativeOn:{click:function(e){t.freePrint()}}},[n("img",{attrs:{src:o(78),height:"300"}}),t._v(" "),n("h1",[t._v("免费打印")]),t._v(" "),n("h2",[t._v("中等质量")]),t._v(" "),n("h4",[t._v("（页边距含不遮挡页面内容的广告）")])]),t._v(" "),n("Col",{staticStyle:{"align-items":"center",display:"flex","flex-direction":"column","justify-content":"center"},attrs:{span:"10"},nativeOn:{click:function(e){t.payPrint()}}},[n("img",{attrs:{src:o(107),height:"300"}}),t._v(" "),n("h1",[t._v("0.1 元/张")]),t._v(" "),n("h2",[t._v("最高质量")]),t._v(" "),n("h4",[t._v("（不含任何类型广告）")])])],1)],1),t._v(" "),n("Footer",[n("p",{staticClass:"layout-footer-center"},[t._v("© Copyright 2018-2019 Oriole(MOTA). All Rights Reserved.")]),t._v(" "),n("v-countdownButton",{ref:"countdown",staticStyle:{position:"absolute",right:"10px",bottom:"10px"}})],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},51:function(t,e,o){o(96);var n=o(14)(o(88),o(130),"data-v-5ca2de92",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\views\\ChooseServiceType.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ChooseServiceType.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},58:function(t,e,o){o(62);var n=o(14)(o(59),o(66),"data-v-684d4a5f",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\components\\CountdownButton.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] CountdownButton.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},59:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{showButton:!0,router:"/"}},components:{},methods:{countDownStart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"true";clearInterval(this.$root.countdownClock),this.router=o,this.showButton=n,this.$root.countdownReturnTime=t,this.$root.countdownClock=window.setInterval(function(){--e.$root.countdownReturnTime<0&&e.countdownDo()},1e3)},countdownDo:function(){clearInterval(this.$root.countdownClock),this.$router.push(this.router)},countdownReset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;this.$root.countdownReturnTime=t}}}},60:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(58),i=o.n(n);e.default={components:{"v-countdownButton":i.a},data:function(){return{title:[{title:"执行结果",key:"state",width:90},{title:"代码",key:"code",width:90},{title:"异常信息",key:"msg"}],errorMsg:[],exceptionModel:!1,randomCode:null}},props:{},methods:{openExceptionModel:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-1",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ERROR";arguments[4]?this.$refs.countdown.countDownStart(60,"/StopServer"):this.$refs.countdown.countDownStart(60),this.randomCode=t;var i={};i.code=o,i.state=n,i.msg=e,this.errorMsg.push(i),this.exceptionModel=!0}}}},61:function(t,e){},62:function(t,e){},63:function(t,e,o){t.exports=o.p+"6f5a360e8c66765b60806e3babf78aef.png"},64:function(t,e,o){o(61);var n=o(14)(o(60),o(65),"data-v-0d3998ae",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\components\\ExceptionModel.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ExceptionModel.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},65:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{width:"700",closable:!1,"mask-closable":!1},model:{value:t.exceptionModel,callback:function(e){t.exceptionModel=e},expression:"exceptionModel"}},[n("p",{staticStyle:{color:"#ed4014","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),n("span",[t._v("系统发生错误或异常")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("img",{staticStyle:{margin:"10px"},attrs:{src:o(63),width:"200"}}),t._v(" "),n("p",{staticStyle:{"font-size":"16px"}},[t._v("由于设备发生致命错误，我们被迫终止本次打印服务，给您带来的不便我们深表歉意。")]),t._v(" "),n("p",{staticStyle:{color:"#999999"}},[t._v("若您已经付费，请保留下方随机用户码进行退费，您将在1个工作日内获得全额退款与一次免费打印机会（限20张内）")]),t._v(" "),n("p",{staticStyle:{margin:"5px"}},[t._v("随机用户编码："),n("span",{staticStyle:{"font-size":"22px"}},[t._v(t._s(t.randomCode)+"-ET")])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Table",{attrs:{columns:t.title,data:t.errorMsg}}),t._v(" "),n("v-countdownButton",{ref:"countdown",staticStyle:{"font-size":"16px","margin-top":"10px"}})],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},66:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.showButton?o("Button",{staticStyle:{"font-size":"16px"},attrs:{type:"error"},on:{click:function(e){t.countdownDo()}}},[o("Icon",{attrs:{type:"md-exit"}}),t._v("\n    退出\n    "),o("span",{staticStyle:{color:"#FA8072"}},[t._v("["+t._s(this.$root.countdownReturnTime)+" 秒]")])],1):t._e()},staticRenderFns:[]},t.exports.render._withStripped=!0},72:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{keyList:[],normalKeyList:[],shiftedKeyList:[],capsedKeyList:[],hasShifted:!1,hasCapsed:!1,keyvalue:""}},created:function(){this.ready()},methods:{clickKey:function(t){switch(t){case"Delete":var e=this.keyvalue;this.keyvalue=e.length?e.substring(0,e.length-1):e;break;case"Tab":this.keyvalue+="\t";break;case"Enter":this.keyvalue+="\n";break;case"Space":this.keyvalue+=" ";break;case"Caps":this.hasCapsed=!this.hasCapsed,this.keyList=this.hasCapsed?this.capsedKeyList:this.normalKeyList;break;case"Shift":this.hasShifted=!this.hasShifted,this.keyList=this.hasShifted?this.shiftedKeyList:this.normalKeyList;break;default:this.keyvalue+=t}console.log(this.keyvalue),this.$emit("updatekey",this.keyvalue)},ready:function(){var t=["`","1","2","3","4","5","6","7","8","9","0","-","=","Delete","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Caps","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","Shift","Space"],e=["~","!","@","#","$","%","^","&","*","(",")","_","+","Delete","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Caps","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","Z","X","C","V","B","N","M","<",">","?","Shift","Space"],o=["`","1","2","3","4","5","6","7","8","9","0","-","=","Delete","Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\","Caps","A","S","D","F","G","H","J","K","L",";","'","Enter","Shift","Z","X","C","V","B","N","M",",",".","/","Shift","Space"];this.keyList=this.normalKeyList=t,this.shiftedKeyList=e,this.capsedKeyList=o}}}},73:function(t,e){},76:function(t,e,o){o(73);var n=o(14)(o(72),o(77),"data-v-8685920a",null);n.options.__file="F:\\Projects\\IdeaProjects\\MotaControlView\\src\\components\\Keyboard.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] Keyboard.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},77:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"keyboard"},t._l(t.keyList,function(e,n){return o("li",{key:n,class:{delete:"Delete"===e,tab:"Tab"===e,capslock:"Caps"===e,enter:"Enter"===e,shift:"Shift"===e,space:"Space"===e,shifted:"Shift"===e&&t.hasShifted,capsed:"Caps"===e&&t.hasCapsed},attrs:{"track-by":"$index"},domProps:{textContent:t._s(e)},on:{click:function(o){t.clickKey(e)}}})}))},staticRenderFns:[]},t.exports.render._withStripped=!0},78:function(t,e,o){t.exports=o.p+"e93a9f5f4f02acc8bda637a772bfd2f7.png"},88:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(15),i=(o.n(n),o(64)),s=o.n(i),r=o(58),a=o.n(r),c=o(76),l=o.n(c);e.default={components:{"v-exception":s.a,"v-countdownButton":a.a,"v-keyboard":l.a},data:function(){return{freePrintModel:!1,payPrintModel:!1,redeemCodePayModel:!1,printLoading:!1,loading_QR:!1,defeatNum:0,count:0,initPayInfo:!0,redeemCode:"",cardInfo:""}},methods:{countdownReset:function(){this.$refs.countdown.countdownReset(300)},freePrint:function(){this.freePrintModel=!0},cardPrint:function(){this.redeemCodePayModel=!0},payPrint:function(){this.payPrintModel=!0,this.initPayInfo&&(console.log("initQRCode"),this.initPayInfo=!1,this.getCount(),this.initWebSocket())},closeAllModel:function(){this.freePrintModel=!1,this.payPrintModel=!1,this.redeemCodePayModel=!1},freePrintConfirm:function(){var t=this;this.printLoading=!0,n({method:"get",url:"http://localhost:8999/adAdd",params:{fileName:this.$root.randomCode,multiPageOrientation:this.$route.params.direction,randomCode:this.$root.randomCode}}).then(function(e){var o=e.data;"SUCCESS"==o.state?(t.printLoading=!1,t.freePrintModel=!1,t.$Message.success("开始打印"),t.$router.push({name:"Print",params:{printMode:1}})):(t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,o.msg,o.code,o.state))}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},cardPrintConfirm:function(){var t=this;n({method:"get",url:this.$root.serverUrl+"pay/setCardResidueDegree",params:{cdkey:this.redeemCode,count:this.count}}).then(function(e){"SUCCESS"==e.data.state?(t.printLoading=!1,t.freePrintModel=!1,t.$Message.success("开始打印"),t.$router.push({name:"Print",params:{printMode:3}})):t.$Modal.confirm({title:"支付未成功",content:"您的卡片已经失效或余额不足，如有疑问请联系墨拓官方处理。",okText:"确认",onOk:function(){t.$Modal.remove()}})}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},payPrintConfirm:function(){var t=this;this.printLoading=!0,n({method:"get",url:this.$root.serverUrl+"pay/checkPrinterOrderState",params:{deviceID:this.$root.deviceID,randomCode:this.$root.randomCode}}).then(function(e){"SUCCESS"==e.data.state?(t.printLoading=!1,t.freePrintModel=!1,t.$Message.success("开始打印"),t.$router.push({name:"Print",params:{printMode:2}})):(t.$Modal.confirm({title:"支付未成功",content:"若您确认已经完成支付，请拍摄用户唯一编码"+t.$root.randomCode+"至微信公众号办理自助退款手续，给您带来不便我们深表歉意。",okText:"确认",onOk:function(){t.$Modal.remove()}}),t.printLoading=!1)}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},getCount:function(){var t=this;this.loading_QR=!0,n({method:"get",url:"http://localhost:8999/getPaperConsumedNum",params:{fileName:this.$root.randomCode}}).then(function(e){var o=e.data;"SUCCESS"==o.state?(t.count=o.msg,t.getQRCodePic()):(t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,o.msg,o.code,o.state))}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},getQRCodePic:function(){var t=this;n({method:"get",url:this.$root.serverUrl+"pay/newPrinterOrder",responseType:"arraybuffer",params:{count:this.count,deviceID:this.$root.deviceID,randomCode:this.$root.randomCode}}).then(function(e){return t.loading_QR=!1,"data:image/png;base64,"+btoa(new Uint8Array(e.data).reduce(function(t,e){return t+String.fromCharCode(e)},""))}).then(function(e){t.$refs.QRCodeImg.src=e,t.loading_QR=!1}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},checkCardVaild:function(){var t=this;n({method:"get",url:this.$root.serverUrl+"pay/getCardInfoByCDKey",params:{cdkey:this.redeemCode}}).then(function(e){var o=e.data;if("SUCCESS"==o.state){var n=1==o.msg.isValid?"有效":"失效";t.cardInfo="券类型：计次消费 剩余打印数量："+o.msg.residueDegree+" 有效期至："+o.msg.failureTime+" 当前状态："+n}else t.cardInfo="CDKEY不存在，请检查您的输入"}).catch(function(e){t.closeAllModel(),t.$refs.exceptionModel.openExceptionModel(t.$root.randomCode,e.toString())})},getRedeemCode:function(t){this.redeemCode=t},initWebSocket:function(){var t=this.$root.websocketUrl+"webSocket/"+this.$root.randomCode;this.websock=new WebSocket(t),this.websock.onmessage=this.websocketOnMessage,this.websock.onopen=this.websocketOnOpen,this.websock.onerror=this.websocketOnError,this.websock.onclose=this.websocketClose},websocketOnOpen:function(){console.log("Successful establishment of WebSocket connection")},websocketOnError:function(t){if(this.defeatNum++,console.log("Failure to establish WebSocket connection,The reasons for the error are as follows:"),console.log(t),this.defeatNum<6){var e=this;"error"==t.type&&this.$Notice.error({title:"与服务器建立WEBSOCKET通讯失败",desc:"服务器未能响应请求，正在尝试重新连接 (第 "+this.defeatNum+" 次 / 共 5 次)，若依然失败，请联系MOTA官方 133-0535-6699 尝试解决此问题！"}),setTimeout(function(){e.initWebSocket()},5e3)}else this.$refs.exceptionModel.openExceptionModel(this.$root.randomCode,"Error: WebSocket连接没有正确建立")},websocketOnMessage:function(t){var e=JSON.parse(t.data);"SUCCESS"==e.state&&"1"==e.code&&(this.printLoading=!1,this.freePrintModel=!1,this.$Message.success("开始打印"),this.$router.push({name:"Print",params:{printMode:2}}))},websocketSend:function(t){this.websock.send(t)},websocketClose:function(t){this.websock.close(),console.log("WebSocket Connection Disconnected",t)}}}},96:function(t,e){}});